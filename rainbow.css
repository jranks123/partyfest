/* rainbow.css */
.rainbow-text span {
    font-size: 1em;
    -webkit-text-stroke: 2px black;
    text-shadow: 3px 3px 0px #000;
    display: inline-block;
    position: relative;
    transform-origin: bottom center; /* Makes squishing look natural */
}

/* --- THE CHARACTER TIMELINE --- */
.rainbow-text span:nth-child(1) { 
    color: #FF6B6B; 
    animation: 
        swap-p-mischief 4s ease-in-out 5s forwards,
        p-to-gap-mischief 5s ease-in-out 13.5s forwards, 
        p-return-home 2s ease-in-out 23s forwards;
}

.rainbow-text span:nth-child(4) { 
    color: #A8E6CF; 
    animation: 
        t-to-front-mischief 3.5s ease-in-out 12.5s forwards,
        t-return-home 2s ease-in-out 23s forwards;
}

.rainbow-text span:nth-child(6) { 
    color: #FFE66D; 
    animation: 
        swap-f-reaction 4s ease-in-out 5s forwards,
        f-back-home-reaction 4s ease-in-out 13.5s forwards;
}

/* Static Rainbow Colors */
.rainbow-text span:nth-child(2) { color: #FFD93D; }
.rainbow-text span:nth-child(3) { color: #4ECDC4; }
.rainbow-text span:nth-child(5) { color: #FF6B6B; }
.rainbow-text span:nth-child(7) { color: #95E1D3; }
.rainbow-text span:nth-child(8) { color: #FF9FF3; }
.rainbow-text span:nth-child(9) { color: #FFD93D; }

/* --- REFINED KEYFRAMES --- */

@keyframes swap-p-mischief {
    /* Shake: Building up to the jump */
    0%, 10%, 20%, 30%, 40% { transform: translate(0,0) rotate(2deg); }
    5%, 15%, 25%, 35%, 45% { transform: translate(0,0) rotate(-2deg); }
    50%  { transform: translate(0,0) scaleY(0.8); } /* Crouch */
    60%  { transform: translate(0, -1.4em) scaleY(1.1); } /* Leap */
    85%  { transform: translate(2.55em, -1.4em); } 
    95%  { transform: translate(2.55em, 0.1em) scaleY(0.7); } /* Land Squish */
    100% { transform: translate(2.55em, 0) scaleY(1); } 
}

@keyframes swap-f-reaction {
    0%, 88% { transform: translate(0,0); } 
    90%  { transform: translate(0, 0.3em) scaleY(0.6); } /* Shoved down */
    96%  { transform: translate(-2.55em, 0.3em); } 
    100% { transform: translate(-2.55em, 0); } 
}

@keyframes t-to-front-mischief {
    /* Shake: Anticipation */
    0%, 10%, 20%, 30% { transform: translate(0,0) translateX(0.05em); }
    5%, 15%, 25%, 35% { transform: translate(0,0) translateX(-0.05em); }
    45% { transform: translate(0, 0) scaleY(0.7); } /* Crouch */
    55% { transform: translate(0, -1.5em) scaleY(1.1); } /* Spring */
    85% { transform: translate(-1.55em, -1.5em); }
    95% { transform: translate(-1.55em, 0.1em) scaleY(0.7); } /* Stomp */
    100% { transform: translate(-1.55em, 0) scaleY(1); }
}

@keyframes f-back-home-reaction {
    0%, 45% { transform: translate(-2.55em, 0); }
    50% { transform: translate(-2.55em, 0.2em) scaleY(0.8); } /* Flinch from T */
    80% { transform: translate(0, 0.2em); } 
    100% { transform: translate(0, 0); }
}

@keyframes p-to-gap-mischief {
    /* Bored Jiggle before jump */
    0%, 20%, 40% { transform: translate(2.55em, 0) rotate(3deg); }
    10%, 30%, 50% { transform: translate(2.55em, 0) rotate(-3deg); }
    58% { transform: translate(2.55em, -1.1em); } 
    85% { transform: translate(1.55em, -1.1em); } 
    100% { transform: translate(1.55em, 0); }
}

@keyframes p-return-home {
    0%   { transform: translate(1.55em, 0); }
    100% { transform: translate(0, 0); }
}

@keyframes t-return-home {
    0%   { transform: translate(-1.55em, 0); }
    100% { transform: translate(0, 0); }
}